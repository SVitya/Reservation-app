(this.webpackJsonpreservation_cms=this.webpackJsonpreservation_cms||[]).push([[0],{33:function(e,t,a){e.exports=a(68)},38:function(e,t,a){},49:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(30),l=a.n(c),i=a(15),o=a(10),u=a(4),m=(a(38),a(21)),s=a.n(m);s.a.initializeApp({apiKey:"AIzaSyDAGtr35zpQde_Uw8_W_BN5z6VpcXaTz7k",authDomain:"reservation-e459e.firebaseapp.com",databaseURL:"https://reservation-e459e.firebaseio.com",projectId:"reservation-e459e",storageBucket:"reservation-e459e.appspot.com",messagingSenderId:"194705364201",appId:"1:194705364201:web:8cc08d320057cf864d8c78"});var d=s.a.firestore();a(49);function v(){return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/price"},"Price")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/reservation"},"Reservation")))))}a(54);function b(e){var t=e.title,a=e.subtitle;return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,t),r.a.createElement("p",null,a),r.a.createElement(o.b,{to:"/price"},"Price"),r.a.createElement(o.b,{to:"/reservation"},"Reservation"))}a(55);function E(e){var t=e.item;return r.a.createElement(r.a.Fragment,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},t.name))),r.a.createElement("tbody",null,Object.entries(t.price).map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{key:e[0]},e[0]),r.a.createElement("td",{key:e[1]},e[1]))}))))}function f(e){var t=e.items;return r.a.createElement("div",{className:"price"},r.a.createElement("table",null,t.map((function(e){return r.a.createElement(E,{key:e.id,item:e})}))),r.a.createElement(o.b,{to:"/reservation"},"Reservation"))}var p=a(12),h=a(3);a(56);function j(){return(new Date).getHours()+1}function O(){return g(new Date)}function g(e){var t=e.getFullYear(),a=e.getMonth()+1,n=""+e.getDate();return a.toString.length<2&&(a="0"+a),n.length<2&&(n="0"+n),"".concat(t,"-").concat(a,"-").concat(n)}function y(e){var t=e.value,a=e.handleChange;e.formValues,e.setFormValues,e.close;return r.a.createElement("li",null,r.a.createElement("label",null,"Date",r.a.createElement("input",{type:"date",name:"date",value:t,onChange:a,required:!0,min:O()})))}var C=a(32),V=a.n(C);function k(e){var t=e.value,a=e.handleChange,c=e.formValues,l=e.setFormValues,o=e.date,u=e.open,m=e.close,s=Object(n.useState)(""),d=Object(i.a)(s,2),v=d[0],b=d[1];function E(e){for(var t="",a=e;a<m;a++)t+="<option value='".concat(a,":00'>").concat(a,":00</option>");return t}return Object(n.useEffect)((function(){o===O()?(b(E(j())),l(Object(h.a)(Object(h.a)({},c),{},{time:j()}))):(b(E(u)),l(Object(h.a)(Object(h.a)({},c),{},{time:"".concat(u,":00")})))}),[o]),r.a.createElement("li",null,r.a.createElement("label",null,"Time",r.a.createElement("select",{name:"time",value:t,onChange:a,required:!0},V()(v))))}function S(e){var t=e.item,a=e.value,n=e.handleChange,c=e.max;return r.a.createElement("li",null,r.a.createElement("label",null,t.name," (max ",c,")",r.a.createElement("input",{type:"number",name:t.id,value:a,onChange:n,min:"0",max:c,required:!0})))}function D(e){var t=e.items,a=e.formValues,c=e.handleChange,l=e.reserved,i=e.setReserved;return Object(n.useEffect)((function(){var e=!0;return""!==a.date&&d.collection("dates").doc(a.date).get().then((function(t){e&&(void 0!==t.data()&&void 0!==t.data()[a.time]?i(t.data()[a.time]):i({}))})).catch((function(t){e&&console.error(t)})),function(){e=!1}}),[a.date,a.time,t,i]),r.a.createElement("div",null,t.map((function(e){return r.a.createElement(S,{key:e.id,item:e,value:void 0!==a.items?a.items[e.id]:"",handleChange:c,max:void 0!==l[e.id]?e.quantity-l[e.id]:e.quantity})})))}function w(e){var t=e.label,a=e.type,n=e.name,c=e.value,l=e.handleChange,i=e.max,o=e.pattern;return r.a.createElement("li",null,r.a.createElement("label",null,t,r.a.createElement("input",{type:a,name:n,value:c,onChange:l,min:"0",max:i,pattern:o,required:!0})))}function x(){return r.a.createElement("li",null,r.a.createElement("input",{type:"submit",value:"Reserve"}))}var N=Object(u.f)((function(e){var t=e.items,a=e.open,c=e.close,l=e.history,o=Object(n.useState)({date:j()<c?O():g(new Date((new Date).getTime()+864e5)),time:a<j()&&j()<c?j()+":00":a+":00",phone:"+38"}),u=Object(i.a)(o,2),m=u[0],s=u[1],v=Object(n.useState)({}),b=Object(i.a)(v,2),E=b[0],f=b[1];function C(e){var t=e.target,a=t.name,n=t.value,r=t.type;"time"===a?s(Object(h.a)(Object(h.a)({},m),{},Object(p.a)({},a,n)),V()):s("number"===r?Object(h.a)(Object(h.a)({},m),{},{items:Object(h.a)(Object(h.a)({},m.items),{},Object(p.a)({},a,+n))}):Object(h.a)(Object(h.a)({},m),{},Object(p.a)({},a,n)))}function V(){var e;t.forEach((function(t){return e=Object(h.a)(Object(h.a)({},e),{},Object(p.a)({},t.id,0))})),s(Object(h.a)(Object(h.a)({},m),{},{items:Object(h.a)({},e)}))}return Object(n.useEffect)((function(){V()}),[]),r.a.createElement("form",{className:"reservation",onSubmit:function(e){if(e.preventDefault(),Object.values(m.items).some((function(e){return 0!==e}))){var t={};for(var a in m.items)m.items[a]>0&&(t=Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},a,void 0!==E[a]?E[a]+m.items[a]:m.items[a])));d.collection("dates").doc(m.date).set(Object(p.a)({},m.time,Object(h.a)({},t)),{merge:!0}).then((function(){return l.push("/success")})).catch((function(e){return console.log(e)})),d.collection("dates").doc(m.date).collection(m.time).doc().set(Object(h.a)(Object(h.a)({},m.items),{},{name:m.name,phone:m.phone}))}else alert("Please, choose some items")}},r.a.createElement("ul",null,r.a.createElement(y,{value:m.date,handleChange:C,formValues:m,setFormValues:s,close:c}),r.a.createElement(k,{value:m.time,handleChange:C,formValues:m,setFormValues:s,date:m.date,open:a,close:c}),r.a.createElement(D,{items:t,formValues:m,handleChange:C,reserved:E,setReserved:f}),r.a.createElement(w,{label:"Name",type:"text",name:"name",value:m.name,handleChange:C,pattern:"[a-zA-Z\u0430-\u044f\u0491\u0454\u0456\u0457\u0410-\u042f\u0490\u0404\u0406\u0407 ]{2,30}"}),r.a.createElement(w,{label:"Phone number",type:"tel",name:"phone",value:m.phone,handleChange:C,pattern:"^\\+38[0-9]{10}"}),r.a.createElement(x,null)))}));a(67);function R(){return r.a.createElement("h1",{className:"success"},"Thanks for your reservation!")}function q(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){d.collection("rentProviders").doc("rentProvider1").get().then((function(e){return c(e.data())})).catch((function(e){return console.error(e)}))}),[]),void 0!==a.items?r.a.createElement(o.a,null,r.a.createElement(v,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/price"},r.a.createElement(f,{items:a.items})),r.a.createElement(u.a,{path:"/reservation"},r.a.createElement(N,{items:a.items,open:a.open,close:a.close})),r.a.createElement(u.a,{path:"/success"},r.a.createElement(R,null)),r.a.createElement(u.a,{path:"/"},r.a.createElement(b,{title:a.title,subtitle:a.subtitle})))):r.a.createElement("p",null,"Wait a second...")}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.682548fd.chunk.js.map